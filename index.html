<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pénzügyi Kalkulátor 2026</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .container { width: 90%; max-width: 500px; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; }
        h1, h2 { color: #333; }
        button { width: 100%; padding: 15px; margin: 10px 0; border: none; border-radius: 12px; cursor: pointer; font-size: 17px; font-weight: 600; transition: 0.3s; }
        .main-btn { background: #4a90e2; color: white; }
        .main-btn:hover { background: #357abd; }
        .back-btn { background: #e0e0e0; color: #333; }
        .calc-btn { background: #2ecc71; color: white; margin-top: 20px; }
        .hidden { display: none; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; text-align: center; font-size: 16px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: left; margin-top: 20px; border-top: 2px solid #eee; padding-top: 15px; }
        .column h3 { font-size: 14px; color: #666; text-transform: uppercase; margin-bottom: 10px; }
        .res-item { font-size: 14px; margin-bottom: 5px; }
        .total-highlight { background: #f9f9f9; padding: 15px; border-radius: 10px; margin-top: 20px; text-align: left; border-left: 5px solid #2ecc71; }
        .green-text { color: #27ae60; font-weight: bold; font-size: 18px; }
    </style>
</head>
<body>

<div class="container" id="main-menu">
    <h1>Pénzügyi App</h1>
    <button class="main-btn" onclick="showScreen('arany-screen', loadGold)">Arany</button>
    <button class="main-btn" onclick="showScreen('arfolyam-screen', loadRates)">Árfolyam</button>
    <button class="main-btn" onclick="showScreen('ber-screen')">Munkabér</button>
</div>

<div class="container hidden" id="arfolyam-screen">
    <h2>Valuta Árfolyamok</h2>
    <div id="rates-result" style="font-size: 20px; margin: 20px 0;">Betöltés...</div>
    <button class="back-btn" onclick="showScreen('main-menu')">Vissza</button>
</div>

<div class="container hidden" id="arany-screen">
    <h2>Arany Árak / gramm</h2>
    <div id="gold-result" style="font-size: 20px; margin: 20px 0;">Betöltés...</div>
    <button class="back-btn" onclick="showScreen('main-menu')">Vissza</button>
</div>

<div class="container hidden" id="ber-screen">
    <h2>Bérkalkulátor</h2>
    <input type="number" id="netto" placeholder="Nettó bér (Ft)" oninput="calcFromNetto()">
    <input type="number" id="brutto" placeholder="Bruttó bér (Ft)" oninput="calcFromBrutto()">
    <input type="number" id="gyerekek" placeholder="Gyermekek száma" oninput="recalculate()">
    
    <button class="calc-btn" onclick="showFinalResults()">Mehet</button>

    <div id="results" class="hidden">
        <div class="grid">
            <div class="column">
                <h3>Levonások</h3>
                <div class="res-item">SZJA (15%): <span id="szja-val">0</span> Ft</div>
                <div class="res-item">TB járulék (18.5%): <span id="tb-val">0</span> Ft</div>
                <hr>
                <strong>Összesen: <span id="levonas-sum">0</span> Ft</strong>
            </div>
            <div class="column">
                <h3>Munkáltató kiadása</h3>
                <div class="res-item">Szocho (13%): <span id="szocho-val">0</span> Ft</div>
                <div class="res-item">TB kiegészítés: <span id="tb-extra">0</span> Ft</div>
                <hr>
                <strong>Összesen: <span id="munkaltato-sum">0</span> Ft</strong>
            </div>
        </div>
        <div class="total-highlight">
            A munkáltató kiadása nettó nélkül:<br>
            <span class="green-text" id="kiadas-netto-nelkul">0 Ft</span><br>
            <small>(Összes kiadás: <span id="teljes-koltseg">0</span> Ft)</small>
        </div>
    </div>
    <button class="back-btn" style="margin-top:20px;" onclick="showScreen('main-menu')">Vissza</button>
</div>

<script>
    function showScreen(id, callback) {
        document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
        if (callback) callback();
    }

    function format(num) {
        return Math.round(num).toLocaleString('hu-HU');
    }

    // --- ÁRFOLYAMOK ---
    async function loadRates() {
        try {
            const res = await fetch('https://open.er-api.com/v6/latest/HUF');
            const data = await res.json();
            const r = data.rates;
            document.getElementById('rates-result').innerHTML = `
                <p>1 EUR = <b>${(1/r.EUR).toFixed(2)}</b> Ft</p>
                <p>1 USD = <b>${(1/r.USD).toFixed(2)}</b> Ft</p>
                <p>1 GBP = <b>${(1/r.GBP).toFixed(2)}</b> Ft</p>
            `;
        } catch(e) { document.getElementById('rates-result').innerText = "Hiba a letöltéskor."; }
    }

    // --- ARANY (2026-OS ÁRAK) ---
    async function loadGold() {
        try {
            const res = await fetch('https://open.er-api.com/v6/latest/USD');
            const data = await res.json();
            const hufRate = data.rates.HUF;
            // 2026. jan 14: Világpiaci ár kb. 4615 USD/uncia
            const goldOunceUsd = 4615; 
            const grammPriceHuf = (goldOunceUsd / 31.1035) * hufRate;

            document.getElementById('gold-result').innerHTML = `
                <p>24 karát: <b>${format(grammPriceHuf)}</b> Ft/g</p>
                <p>18 karát: <b>${format(grammPriceHuf * 0.75)}</b> Ft/g</p>
                <p>14 karát: <b>${format(grammPriceHuf * 0.585)}</b> Ft/g</p>
            `;
        } catch(e) { document.getElementById('gold-result').innerText = "Hiba az adatoknál."; }
    }

    // --- BÉRKALKULÁTOR ---
    function getKedvezmeny() {
        const gy = parseInt(document.getElementById('gyerekek').value) || 0;
        if (gy === 1) return 10000;
        if (gy === 2) return 40000;
        if (gy >= 3) return gy * 33000;
        return 0;
    }

    function calcFromBrutto() {
        const b = parseFloat(document.getElementById('brutto').value) || 0;
        const kedv = getKedvezmeny();
        const szja = Math.max(0, (b * 0.15) - kedv);
        const tb = b * 0.185;
        document.getElementById('netto').value = Math.round(b - szja - tb);
    }

    function calcFromNetto() {
        const n = parseFloat(document.getElementById('netto').value) || 0;
        const kedv = getKedvezmeny();
        const b = (n - kedv) / 0.665;
        document.getElementById('brutto').value = Math.round(b);
    }

    function recalculate() { calcFromBrutto(); }

    function showFinalResults() {
        const b = parseFloat(document.getElementById('brutto').value) || 0;
        const n = parseFloat(document.getElementById('netto').value) || 0;
        
        const szja = b * 0.15;
        const tb = b * 0.185;
        const szocho = b * 0.13;
        const tbKieg = b > 0 && b < 70000 ? (70000 - b) * 0.185 : 0;

        document.getElementById('szja-val').innerText = format(szja);
        document.getElementById('tb-val').innerText = format(tb);
        document.getElementById('levonas-sum').innerText = format(szja + tb);
        document.getElementById('szocho-val').innerText = format(szocho);
        document.getElementById('tb-extra').innerText = format(tbKieg);
        document.getElementById('munkaltato-sum').innerText = format(szocho + tbKieg);
        
        const nettoNelkul = szja + tb + szocho + tbKieg;
        document.getElementById('kiadas-netto-nelkul').innerText = format(nettoNelkul) + " Ft";
        document.getElementById('teljes-koltseg').innerText = format(b + szocho + tbKieg);
        
        document.getElementById('results').classList.remove('hidden');
    }
</script>
</body>
</html>
